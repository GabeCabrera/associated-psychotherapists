# .cursorrules - AI Development Rules

**AI Assistant:** You are building the **Associated Psych Platform** (SaaS for therapists and clients)

## PRIMARY DIRECTIVE

**Read `AI_SPEC.md` FIRST** - It contains all copy-paste ready code, schemas, and patterns.

## FILE PRIORITY (Read in order)

1. **AI_SPEC.md** → Copy-paste ready code, schemas, component patterns, library catalog
2. **DESIGN.md** → Design tokens, UX principles, accessibility standards (when UI work)
3. **SECURITY.md** → RLS policies, encryption, auth patterns (when data/auth work)
4. **plan.md** → Implementation phases and order (when planning)

## CORE RULES

### Code Generation
- **USE PREBUILT LIBRARIES** → shadcn/ui, Supabase, Stripe, react-hook-form
- **COPY-PASTE FROM AI_SPEC.md** → Don't rewrite existing patterns
- **CUSTOMIZE ONLY DESIGN TOKENS** → Colors, fonts, spacing match DESIGN.md
- **NEVER DEVIATE** from tech stack (Next.js 14, TypeScript, Supabase, TailwindCSS)

### File Creation
- Follow folder structure from `AI_SPEC.md` Section: File Structure Pattern
- Use naming conventions: PascalCase (components), camelCase (utils), kebab-case (routes)
- Place in correct directory: `/components/ui`, `/lib/utils`, `/app/api`

### Database
- Copy schemas from `AI_SPEC.md` Section: DATABASE SCHEMA
- **ALWAYS enable RLS** on every table
- Include `created_at`, `updated_at`, `deleted_at` (soft delete)
- Use UUID primary keys with `gen_random_uuid()`

### API Routes
- Copy template from `AI_SPEC.md` Section: API PATTERNS
- Use standard response format (success, data, meta/error)
- Return proper HTTP status codes
- Validate with Zod schemas

### Components
- Use shadcn/ui components (listed in AI_SPEC.md)
- Use design tokens from `DESIGN.md`
- Use Lucide icons only
- Use Framer Motion for animations
- Ensure WCAG 2.1 AA compliance

### TypeScript
- Enable strict mode
- Never use `any`
- Export types in `/lib/types/*.types.ts`
- Validate forms with Zod

## DECISION FLOW

```
Request received
    ↓
Is it UI work? → Read DESIGN.md
    ↓
Is it data/security? → Read SECURITY.md
    ↓
Is it implementation? → Check AI_SPEC.md FIRST
    ↓
Copy-paste pattern from AI_SPEC.md
    ↓
Customize design tokens only
    ↓
Generate code
```

## QUICK REFERENCE

**Tech Stack:** Next.js 14 + TypeScript + Supabase + TailwindCSS + Framer Motion
**Users:** Therapists, Clients, Admins
**Features:** Profiles, Booking, Messaging, Payments

## NEVER DO THIS
- Create custom auth (use Supabase Auth)
- Skip RLS policies
- Use different colors/fonts than DESIGN.md
- Rewrite what exists in shadcn/ui
- Ignore TypeScript errors
- Store PHI without HIPAA compliance (see SECURITY.md)

## WHEN UNCERTAIN
1. Check AI_SPEC.md first
2. If not covered, check relevant specialized doc (DESIGN/SECURITY)
3. Default to simplest, most secure solution
4. Ask clarifying question if still unclear

---

**Repository:** amari
**Owner:** GabeCabrera
**Branch Strategy:** Feature branches → dev → main

---

**Read AI_SPEC.md before responding to any implementation request.**